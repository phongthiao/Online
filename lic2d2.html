<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phòng Thi Ảo - Chương 2 - Khí Lí Tưởng - Đề số 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* General Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #1f2937;
        }
        /* Main container for the exam */
        .exam-container {
            max-width: 900px;
            margin: 1rem auto; /* Reduced margin for mobile */
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 1.5rem; /* Padding for mobile */
        }
        /* Header section */
        .exam-header {
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        /* Sticky timer at the top */
        .timer {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #4f46e5, #818cf8);
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 1.25rem; /* Adjusted font size for responsiveness */
            font-weight: 700;
            z-index: 10;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
        }
        /* Individual question block */
        .question-block {
            margin-bottom: 2rem;
            padding: 1rem; /* Adjusted padding */
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .question-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: #111827;
            line-height: 1.6;
        }
        /* Option styling for multiple choice */
        .option {
            display: flex;
            align-items: flex-start; /* Align items to the start for long text */
            text-align: left;
            margin-bottom: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .option:hover {
            background-color: #f3f4f6;
        }
        .option input {
            margin-top: 0.25rem; /* Align radio button better */
            margin-right: 0.75rem;
            flex-shrink: 0;
        }
        /* Short answer input field */
        .short-answer-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            margin-top: 0.5rem;
        }
        /* Action buttons container */
        .action-buttons {
            display: flex;
            flex-direction: column; /* Stack buttons on mobile */
            gap: 1rem;
            margin-top: 2rem;
        }
        /* General button styling */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            width: 100%; /* Full width on mobile */
        }
        .btn-submit {
            background-color: #2563eb;
            color: white;
        }
        .btn-submit:hover {
            background-color: #1d4ed8;
        }
        .btn-redo {
            background-color: #e5e7eb;
            color: #374151;
        }
        .btn-redo:hover {
            background-color: #d1d5db;
        }
        
        /* Result styles */
        .correct { border-left: 5px solid #22c55e; background-color: #f0fdf4; }
        .incorrect { border-left: 5px solid #ef4444; background-color: #fef2f2; }
        .unanswered { border-left: 5px solid #f97316; background-color: #fff7ed; }
        .correct-answer-text { color: #16a34a; font-weight: 600; margin-left: 1rem; }
        .result-summary {
            text-align: center;
            padding: 1.5rem;
            border: 2px dashed #4f46e5;
            border-radius: 12px;
            margin-bottom: 2rem;
            background-color: #fafaff;
        }
        .result-icon { font-size: 1.2rem; margin-left: 0.5rem; }

        /* Responsive True/False Table */
        .true-false-table .statement-cell {
            display: block;
            width: 100%;
            margin-bottom: 0.5rem;
        }
        .true-false-table .option-cell {
            display: inline-block;
            margin-right: 1rem;
        }
        .true-false-table .feedback-cell {
            display: block;
            margin-top: 0.5rem;
        }

        /* Desktop and larger screen adjustments */
        @media (min-width: 768px) {
            .exam-container {
                margin: 2rem auto;
                padding: 2.5rem;
            }
            .question-block {
                padding: 1.5rem;
            }
            .timer {
                font-size: 1.5rem;
            }
            .action-buttons {
                flex-direction: row; /* Buttons side-by-side on desktop */
                justify-content: center;
            }
            .btn {
                width: auto; /* Auto width for buttons on desktop */
            }
            .result-summary {
                padding: 2rem;
            }
             /* Revert True/False table to standard table layout on desktop */
            .true-false-table .statement-cell,
            .true-false-table .option-cell,
            .true-false-table .feedback-cell {
                display: table-cell;
                width: auto;
                margin-bottom: 0;
                margin-right: 0;
                margin-top: 0;
                vertical-align: middle;
            }
             .true-false-table .statement-cell {
                width: 70%;
             }
        }
    </style>
</head>
<body>

    <div class="exam-container">
        <div class="exam-header">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">TỔNG ÔN CHƯƠNG 2 – KHÍ LÍ TƯỞNG – ĐỀ 2</h1>
            <p class="text-gray-600 mt-2">Thời gian làm bài: 60 phút</p>
        </div>

        <div id="timer" class="timer">Thời gian còn lại: 60:00</div>
        
        <div id="exam-form">
            <!-- PHẦN I -->
            <h2 class="text-xl md:text-2xl font-bold text-indigo-700 mb-4">PHẦN I. CÂU TRẮC NGHIỆM NHIỀU PHƯƠNG ÁN LỰA CHỌN</h2>
            <div id="part1"></div>

            <!-- PHẦN II -->
            <h2 class="text-xl md:text-2xl font-bold text-indigo-700 mt-8 mb-4">PHẦN II. CÂU TRẮC NGHIỆM ĐÚNG SAI</h2>
            <div id="part2"></div>
            
            <!-- PHẦN III -->
            <h2 class="text-xl md:text-2xl font-bold text-indigo-700 mt-8 mb-4">PHẦN III. CÂU TRẮC NGHIỆM TRẢ LỜI NGẮN</h2>
            <div id="part3"></div>

            <div class="action-buttons">
                <button id="submitBtn" class="btn btn-submit">Nộp Bài</button>
                <button id="redoBtn" class="btn btn-redo" style="display: none;">Làm Lại</button>
            </div>
        </div>

        <div id="result-summary" class="result-summary" style="display: none;"></div>
    </div>

    <script>
        const examData = {
            part1: [
                { question: "Phương trình trạng thái của khí lý tưởng liên hệ giữa", options: ["Áp suất, thể tích và nhiệt độ tuyệt đối của khí.", "Khối lượng, thể tích và nhiệt độ tuyệt đối của khí.", "Áp suất, nhiệt độ và số mol của khí.", "Khối lượng, áp suất và số mol của khí."], answer: "A" },
                { question: "Hệ thức nào sau đây là của định luật Boyle?", options: ["p₁V₂ = p₂V₁", "V/p = hằng số.", "pV = hằng số.", "V/p = hằng số."], answer: "C" },
                { question: "Để tăng động năng chuyển động nhiệt trung bình của các phân tử chất khí trong một ống xi lanh, ta", options: ["Cho ống xi lanh chuyển động nhanh hơn.", "Dãn đẳng nhiệt khối khí trong ống xi lanh.", "Dãn đẳng áp khối khí trong ống xi lanh.", "Cho ống xi lanh tiếp xúc với vật có nhiệt độ thấp hơn như cho vào cốc nước lạnh."], answer: "C" },
                { question: "Biểu thức nào sau đây phù hợp với định luật Charles?", options: ["V/T² = hằng số.", "V.T = hằng số", "V₂/T₁ = V₁/T₂.", "V = V₀(1 + αt)."], answer: "D" },
                { question: "Tăng nhiệt độ của một lượng khí lên 2 lần và đồng thời giảm thể tích của lượng khí đó 2 lần thì áp suất của lượng khí", options: ["tăng 2 lần.", "không đổi.", "giảm 2 lần.", "tăng 4 lần."], answer: "D" },
                { question: "Sử dụng thông tin sau cho Câu 6 và Câu 7: Một lượng khí lí tưởng có trạng thái biến đổi đẳng quá trình được biểu diễn theo đồ thị hình bên. Chọn đáp án đúng:", svg: `<svg viewBox="0 0 450 350" class="w-full max-w-sm mx-auto my-4 bg-gray-50 rounded-lg border"><path d="M 50 300 L 430 300" stroke="black" stroke-width="2" marker-end="url(#arrowV)"></path><path d="M 50 300 L 50 20" stroke="black" stroke-width="2" marker-end="url(#arrowP)"></path><text x="30" y="20" font-size="16" font-style="italic">p (atm)</text><text x="400" y="320" font-size="16" font-style="italic">V (lit)</text><text x="35" y="320" font-size="16">O</text><line x1="150" y1="250" x2="350" y2="250" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrowH)"></line><path d="M 350 250 Q 250 150 100 80" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrowC)"></path><circle cx="150" cy="250" r="4" fill="black"></circle><text x="140" y="270" font-size="16">(1)</text><circle cx="350" cy="250" r="4" fill="black"></circle><text x="360" y="260" font-size="16">(2)</text><circle cx="100" cy="80" r="4" fill="black"></circle><text x="110" y="75" font-size="16">(3)</text><line x1="50" y1="250" x2="150" y2="250" stroke="black" stroke-width="1" stroke-dasharray="4"></line><text x="30" y="255" font-size="14">1</text><line x1="50" y1="80" x2="100" y2="80" stroke="black" stroke-width="1" stroke-dasharray="4"></line><text x="30" y="85" font-size="14">4</text><line x1="100" y1="300" x2="100" y2="80" stroke="black" stroke-width="1" stroke-dasharray="4"></line><text x="95" y="320" font-size="14">2</text><line x1="150" y1="300" x2="150" y2="250" stroke="black" stroke-width="1" stroke-dasharray="4"></line><text x="145" y="320" font-size="14">4</text><line x1="350" y1="300" x2="350" y2="250" stroke="black" stroke-width="1" stroke-dasharray="4"></line><text x="345" y="320" font-size="14">8</text><text x="220" y="150" font-size="16" font-style="italic">Hypebol</text><defs><marker id="arrowV" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="black"></path></marker><marker id="arrowP" viewBox="0 0 10 10" refX="5" refY="2" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 10 L 5 0 L 10 10 z" fill="black"></path></marker><marker id="arrowH" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="5" markerHeight="5" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6"></path></marker><marker id="arrowC" viewBox="0 0 10 10" refX="2" refY="5" markerWidth="5" markerHeight="5" orient="auto-start-reverse"><path d="M 10 0 L 0 5 L 10 10 z" fill="#3b82f6"></path></marker></defs></svg>`, options: ["Giai đoạn từ (2) sang (3) là nén đẳng áp", "Giai đoạn từ (1) sang (2) là dãn đẳng nhiệt", "Giai đoạn từ (1) sang (2) là nén đẳng áp", "Giai đoạn từ (2) sang (3) là nén đẳng nhiệt"], answer: "D" },
                { question: "Nhiệt độ ban đầu của khối khí ở trạng thái (1) là 27°C hãy xác định nhiệt độ của khối khí ở trạng thái (3).", options: ["300°C", "327°C", "600°C", "873 K."], answer: "B" },
                { question: "Khi một lượng khí lí tưởng xác định dãn nở đẳng nhiệt thì mật độ phân tử khí sẽ", options: ["tăng tỉ lệ nghịch với áp suất.", "giảm tỉ lệ thuận với áp suất.", "không thay đổi.", "tăng, không tỉ lệ với áp suất."], answer: "B" },
                { question: "Một lượng khí lí tưởng xác định khi nhiệt độ thay đổi thì", options: ["áp suất phải thay đổi.", "thể tích phải thay đổi.", "áp suất và thể tích không đổi.", "tích của áp suất và thể tích phải thay đổi."], answer: "D" },
                { question: "Trong quá trình đẳng áp, nhiệt độ của một lượng khí nhất định tăng từ 27°C lên 87°C thì thể tích của nó tăng lên bao nhiêu lần?", options: ["3,2 lần.", "1,2 lần.", "4,2 lần.", "2,2 lần."], answer: "B" },
                { question: "Một khối khí lí tưởng xác định thực hiện quá trình biến đổi đẳng nhiệt ở hai nhiệt độ khác nhau T₁ và T₂ (trong đó T₂ < T₁). Hình nào dưới đây diễn tả đúng dạng đường đẳng nhiệt trong hệ tọa độ tương ứng?", svg: `<svg viewBox="0 0 440 240" class="w-full max-w-lg mx-auto my-4"><g transform="translate(10, 10)"><text x="45" y="-2" font-size="12">Hình 1</text><path d="M 0 100 L 0 0" stroke="black" stroke-width="1" marker-end="url(#arrowY)"></path><path d="M 0 100 L 80 100" stroke="black" stroke-width="1" marker-end="url(#arrowX)"></path><text x="-10" y="0" font-size="12">p</text><text x="80" y="110" font-size="12">T</text><line x1="20" y1="0" x2="20" y2="100" stroke="blue" stroke-width="2"></line><line x1="50" y1="0" x2="50" y2="100" stroke="blue" stroke-width="2"></line><text x="16" y="110" font-size="10">T₁</text><text x="46" y="110" font-size="10">T₂</text></g><g transform="translate(120, 10)"><text x="45" y="-2" font-size="12">Hình 2</text><path d="M 0 100 L 0 0" stroke="black" stroke-width="1" marker-end="url(#arrowY)"></path><path d="M 0 100 L 80 100" stroke="black" stroke-width="1" marker-end="url(#arrowX)"></path><text x="-10" y="0" font-size="12">p</text><text x="80" y="110" font-size="12">V</text><path d="M 10 70 Q 30 30 70 20" stroke="blue" stroke-width="2" fill="none"></path><path d="M 20 80 Q 40 50 80 40" stroke="blue" stroke-width="2" fill="none"></path><text x="72" y="18" font-size="10">T₂</text><text x="82" y="38" font-size="10">T₁</text></g><g transform="translate(230, 10)"><text x="45" y="-2" font-size="12">Hình 3</text><path d="M 0 100 L 0 0" stroke="black" stroke-width="1" marker-end="url(#arrowY)"></path><path d="M 0 100 L 80 100" stroke="black" stroke-width="1" marker-end="url(#arrowX)"></path><text x="-10" y="0" font-size="12">T</text><text x="80" y="110" font-size="12">p</text><line x1="0" y1="20" x2="80" y2="20" stroke="blue" stroke-width="2"></line><line x1="0" y1="50" x2="80" y2="50" stroke="blue" stroke-width="2"></line><text x="-12" y="24" font-size="10">T₂</text><text x="-12" y="54" font-size="10">T₁</text></g><g transform="translate(340, 10)"><text x="45" y="-2" font-size="12">Hình 4</text><path d="M 0 100 L 0 0" stroke="black" stroke-width="1" marker-end="url(#arrowY)"></path><path d="M 0 100 L 80 100" stroke="black" stroke-width="1" marker-end="url(#arrowX)"></path><text x="-10" y="0" font-size="12">p</text><text x="80" y="110" font-size="12">V</text><path d="M 10 70 Q 30 30 70 20" stroke="blue" stroke-width="2" fill="none"></path><path d="M 20 80 Q 40 50 80 40" stroke="blue" stroke-width="2" fill="none"></path><text x="72" y="18" font-size="10">T₁</text><text x="82" y="38" font-size="10">T₂</text></g><defs><marker id="arrowX" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker id="arrowY" viewBox="0 0 10 10" refX="5" refY="2" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 10 L 5 0 L 10 10 z"></path></marker></defs></svg>`, options: ["Hình 1.", "Hình 2.", "Hình 3.", "Hình 4."], answer: "B" },
                { question: "Một áp kế gồm ống thủy tinh cắm vào chậu đựng thủy ngân như hình vẽ. Chọn câu đúng:", svg: `<svg viewBox="0 0 200 250" class="w-32 mx-auto my-4"><rect x="10" y="180" width="180" height="50" fill="#e2e8f0" stroke="black" stroke-width="2"></rect><path d="M 80 180 V 30 A 20 20 0 0 1 120 30 V 180" fill="none" stroke="black" stroke-width="2"></path><path d="M 80 160 V 50 A 20 20 0 0 1 120 50 V 160 Z" fill="#94a3b8"></path><line x1="140" y1="50" x2="140" y2="160" stroke="black" stroke-width="1.5"></line><path d="M 145 50 L 135 50 M 145 160 L 135 160" stroke="black" stroke-width="1.5"></path><text x="150" y="105" font-size="16">h</text><line x1="100" y1="20" x2="100" y2="50" stroke="black" stroke-width="1.5"></line><path d="M 100 20 L 95 25 M 100 20 L 105 25 M 100 50 L 95 45 M 100 50 L 105 45" stroke="black" stroke-width="1.5"></path><text x="110" y="35" font-size="16" font-style="italic">l</text></svg>`, options: ["Nếu trên đoạn l là chân không thì chiều cao h của cột thủy ngân cho biết áp suất nhỏ hơn khí quyển", "Nếu trên đoạn l có lẫn khí thì chiều cao h của cột thủy ngân cho áp suất lớn hơn áp suất khí quyển", "Nếu trên đoạn l là chân không thì chiều cao h của cột thủy ngân cho biết áp suất khí quyển", "Nếu trên đoạn l có lẫn khí thì chiều cao h của cột thủy ngân cho biết áp suất khí quyển"], answer: "C" },
                { question: "Một bình kín có dung tích 8 dm³ chứa 12 g khí helium ở áp suất 1,85.10⁵ Pa. Khối lượng mol của nguyên tử helium là 4 g/mol. Động năng tịnh tiến trung bình của phân tử helium là", options: ["1,23.10⁻²⁰ J.", "1,32.10⁻²⁰ J.", "1,23.10⁻²¹ J.", "1,32.10⁻²¹ J."], answer: "C" },
                { question: "Một lượng khí lí tưởng xác định thực hiện chu trình a→b→c→d→a trong giản đồ pOV như hình bên. Khối khí thực hiện công trong giai đoạn nào sau đây?", svg: `<svg viewBox="0 0 400 300" class="w-full max-w-xs mx-auto my-4 bg-gray-50 rounded-lg border"><path d="M 50 250 L 380 250" stroke="black" stroke-width="2" marker-end="url(#arrowV)"></path><path d="M 50 250 L 50 30" stroke="black" stroke-width="2" marker-end="url(#arrowP)"></path><text x="30" y="30" font-size="20" font-family="serif" font-style="italic">p</text><text x="380" y="270" font-size="20" font-family="serif" font-style="italic">V</text><text x="35" y="270" font-size="16">O</text><rect x="100" y="80" width="200" height="120" stroke="#3b82f6" stroke-width="3" fill="#bfdbfe" fill-opacity="0.5"></rect><text x="90" y="80" font-size="16">a</text><text x="90" y="210" font-size="16">b</text><text x="310" y="210" font-size="16">c</text><text x="310" y="80" font-size="16">d</text><path d="M 100 130 L 100 140" stroke="black" fill="none" marker-end="url(#arrowCycle)"></path><path d="M 200 200 L 210 200" stroke="black" fill="none" marker-end="url(#arrowCycle)"></path><path d="M 300 150 L 300 140" stroke="black" fill="none" marker-end="url(#arrowCycle)"></path><path d="M 200 80 L 190 80" stroke="black" fill="none" marker-end="url(#arrowCycle)"></path><defs><marker id="arrowCycle" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="black"></path></marker></defs></svg>`, options: ["Giai đoạn a→b.", "Giai đoạn b→c.", "Giai đoạn c→a.", "Giai đoạn d→a."], answer: "B" },
                { question: "Một khối khí lí tưởng có khối lượng riêng 1,2 kg/m³ ở áp suất 1,2 atm được nén đẳng nhiệt đến thể tích 12 dm³. Sau khi nén, áp suất của khối khí tăng thêm 0,9 atm. Khối lượng của khối khí là", options: ["25,2 g.", "22,5 g.", "21,6 g.", "26,1 g."], answer: "A" },
                { question: "Một xilanh kín chia thành hai phần bằng nhau bởi một piston cách nhiệt. Mỗi phần có chiều dài L = 48 cm chứa một lượng khí lí tưởng giống nhau ở nhiệt độ 37°C. Nung nóng một phần lên 2Δt, còn phần kia làm lạnh đi Δt thì piston dịch chuyển một đoạn a = 3 cm. Giá trị của Δt gần nhất với giá trị nào sau đây?", options: ["15°C", "12°C.", "14°C.", "13°C."], answer: "D" },
                { question: "Một xilanh được đậy kín bằng một piston có trọng lượng 50 N và tiết diện 40 cm². Ban đầu xilanh dựng thẳng đứng, miệng ở dưới thì cột khí trong xilanh (xem như khí lí tưởng) có chiều dài 40 cm. Đưa xilanh từ từ trở về trạng thái nằm ngang sao cho nhiệt độ của khí không thay đổi thì chiều dài cột khí bằng bao nhiêu? Xilanh và piston cách nhiệt, áp suất khí quyển là 10⁵ Pa.", options: ["32 cm.", "35 cm.", "30 cm.", "36 cm."], answer: "B" },
                { question: "Một khối khí lí tưởng có thể tích 3 lít ở áp suất 8 bar chứa trong một xilanh ở nhiệt độ 300 K. Kéo dãn piston cho thể tích hỗn hợp tăng thêm 2 lít và nhiệt độ của xilanh tăng thêm 10%. Áp suất của hỗn hợp khí sau cùng sau khi kéo dãn piston là", options: ["5,28 bar.", "6,10 bar.", "5,76 bar.", "6,42 bar."], answer: "A" }
            ],
            part2: [
                {
                    context: "Các phân tử chất khí chuyển động nhiệt hỗn loạn, chúng va chạm nhau và va chạm với thành bình nên khi nhiệt độ tăng",
                    statements: [
                        { text: "Tốc độ chuyển động nhiệt trung bình của các phân tử giảm do một số phân tử sau va chạm có tốc độ giảm.", answer: false },
                        { text: "sự va chạm của các phân tử với thành bình mạnh hơn.", answer: true },
                        { text: "số va chạm của các phân tử khí với thành bình cũng tăng lên.", answer: true },
                        { text: "áp suất khí trong bình giảm mạnh do các phân tử va chạm rất mạnh với nhau làm động năng của chúng giảm.", answer: false }
                    ]
                },
                {
                    context: "Một bình kín chứa khí oxygen có thể tích 8 lít đặt trên một cân điện tử thì số chỉ của cân là 80 g. Dùng một áp kế và nhiệt kế để đo áp suất và nhiệt độ của khối khí thì các giá trị đo được là 1,5 atm và -13°C. Lấy khối lượng mol nguyên tử của oxygen là 32 g/mol và hằng số khí R = 0,082 (atm.lít)/(mol.K).",
                    statements: [
                        { text: "Khối lượng của bình xấp xỉ 62 g.", answer: true },
                        { text: "Khối lượng riêng của khí trong bình xấp xỉ 1.8 g/lit.", answer: false },
                        { text: "Nếu làm lạnh bình khí xuống nhiệt độ -53°C rồi đem cân thì số chỉ của cân vẫn không thay đổi.", answer: true },
                        { text: "Trong trường hợp làm lạnh khí xuống nhiệt độ -53°C, áp suất khí trong bình lúc đó xấp xỉ 1,27 atm.", answer: true }
                    ]
                },
                {
                    context: "Một bình thủy tinh có thể tích 250 cm³ gắn với ống nhỏ AB nằm ngang rất dài có tiết diện 0,1 cm², trong ống có một giọt thủy ngân như hình bên (đầu B hở). Khi nhiệt độ trong bình là 10°C thì giọt thủy ngân cách A 50 cm. Khi hơ nóng đẳng áp để nhiệt độ trong bình là 15°C. Coi dung tích của bình không đổi, áp suất khí quyển bằng 10 Pa.",
                    statements: [
                        { text: "Thể tích ban đầu của khí bằng 255 cm³.", answer: true },
                        { text: "Thể tích của khí sau khi hơ nóng bằng xấp xỉ 259,5 cm³.", answer: true },
                        { text: "Trong quá trình hơ nóng, giọt thủy ngân đã dịch chuyển một đoạn xấp xỉ 4,5 cm.", answer: false },
                        { text: "Công do khối khí thực hiện khi hơ nóng bằng 0,45 J.", answer: true }
                    ]
                },
                {
                    context: "Một ngôi nhà có thể tích phần không gian bên trong là 40 m³. Vào một ngày mùa đông, nhiệt độ trong ngôi nhà vào buổi sáng sớm là 20°C và đến giữa trưa là 25°C. Cho biết áp suất khí quyển không đổi trong ngày là 1 atm và khối lượng mol của không khí là 29 g/mol.",
                    statements: [
                        { text: "Ở buổi trưa các phân tử khí trong ngôi nhà chuyển động nhanh hơn so với buổi sáng.", answer: true },
                        { text: "Từ buổi sáng sớm đến giữa trưa, nhiệt độ trong ngôi nhà tăng 278 K.", answer: false },
                        { text: "Số phân tử khí có trong ngôi nhà vào buổi sáng sớm là 7,51.10²⁶ phân tử.", answer: false },
                        { text: "Khối lượng không khí thoát ra khỏi căn phòng từ buổi sáng sớm đến giữa trưa là 0,81 kg.", answer: true }
                    ]
                }
            ],
            part3: [
                { question: "Xét một khối khí trong một bình kín có khối lượng riêng ρ = 50 g/m³. Tốc độ căn quân phương của phân tử khí là 650 m/s. Áp suất của phân tử khí tác dụng lên thành bình là Y.10³ Pa. Giá trị của Y (làm tròn kết quả làm tròn đến hàng đơn vị) bằng bao nhiêu?", answer: "7" },
                { question: "Một chiếc xe tải vượt qua sa mạc Atacama. Chuyến đi bắt đầu vào sáng sớm khi nhiệt độ là 5°C. Đến giữa trưa, nhiệt độ tăng lên đến 45°C. Coi khí trong lốp xe có nhiệt độ như ngoài trời. Độ tăng động năng tịnh tiến trung bình của một phân tử khí do sự gia tăng nhiệt độ này có giá trị là x.10⁻²² J. Giá trị của x bằng bao nhiêu? (làm tròn kết quả đến chữ số hàng phần trăm)", answer: "8.28" },
                { question: "Một chai thủy tinh chứa không khí bị bịt kín bằng một nút đang mắc kẹt ở miệng chai. Biết nút làm bằng xốp có khối lượng không đáng kể, tiết diện của miệng chai là s = 1,8 cm², ở nhiệt độ phòng 27°C áp suất của khối khí trong chai bằng áp suất khí quyển và bằng 1 atm, cho 1 atm = 1,013.10⁵ Pa. Để mở nút chai, một người dùng cách hơ nóng khí trong chai. Khi nhiệt độ của khí trong chai là 87°C thì người này thấy nút bật ra ngoài, bỏ qua sự nở vì nhiệt của chai thủy tinh. Lực ma sát tác dụng lên nút chai khi nút chai bật ra là bao nhiêu? (làm tròn kết quả đến chữ số hàng phần trăm)", answer: "3.65" },
                { question: "Một ống thủy tinh hình chữ U tiết diện đều có một đầu kín và một đầu hở. Bề mặt thủy ngân ở hai nhánh ngang nhau và chiều dài cột khí trong nhánh kín là L₀ = 30 cm. Áp suất khí quyển là 75 cmHg. Nếu đổ thủy ngân vào đầu hở sao cho chiều dài cột khí ở nhánh kín là 25 cm. Khi đó, chiều dài cột thủy ngân được đổ vào ống là bao nhiêu cm?", answer: "15" },
                { question: "Sử dụng thông tin sau cho Câu 5 và Câu 6. Tại một trạm khí tượng cao không, một nhân viên bơm khí Helium vào trong bóng thám không. Khi bóng có bán kính 3,8 m thì người này ngừng bơm và thả bóng để thu thập dữ liệu khí quyển. Biết khi bóng bắt đầu được thả thì khí trong bóng có nhiệt độ 27°C và áp suất 1 atm (bằng áp suất khí quyển tại đó), trong quá trình bay vào khí quyển bóng không bị vỡ. Cho 1 atm = 1,013.10⁵ Pa. Lấy π = 3,14. Khi bóng bay ở tầng khí quyển có áp suất 0,03 atm và nhiệt độ -73°C thì bán kính của bóng là bao nhiêu mét? (làm tròn kết quả đến chữ số hàng phần mười)", answer: "10.7" },
                { question: "Khối lượng khí Helium được bơm vào bóng là bao nhiêu kg? (làm tròn kết quả đến chữ số hàng đơn vị)", answer: "37" }
            ]
        };

        const part1Container = document.getElementById('part1');
        const part2Container = document.getElementById('part2');
        const part3Container = document.getElementById('part3');
        const submitBtn = document.getElementById('submitBtn');
        const redoBtn = document.getElementById('redoBtn');
        const resultSummaryContainer = document.getElementById('result-summary');
        const timerEl = document.getElementById('timer');

        let timerInterval;
        let timeRemaining = 3600;

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            timerEl.textContent = `Thời gian còn lại: ${formatTime(timeRemaining)}`;
            timerInterval = setInterval(() => {
                timeRemaining--;
                timerEl.textContent = `Thời gian còn lại: ${formatTime(timeRemaining)}`;
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    timerEl.textContent = "Hết giờ!";
                    submitExam();
                }
            }, 1000);
        }

        function loadExam() {
            // Part 1
            examData.part1.forEach((q, index) => {
                const qBlock = document.createElement('div');
                qBlock.className = 'question-block';
                qBlock.id = `p1-q${index}`;
                let optionsHTML = '';
                q.options.forEach((opt, i) => {
                    const optionChar = String.fromCharCode(65 + i);
                    optionsHTML += `
                        <label class="option">
                            <input type="radio" name="p1-q${index}" value="${optionChar}">
                            <span><strong>${optionChar}.</strong> ${opt}</span>
                        </label>
                    `;
                });
                qBlock.innerHTML = `<p class="question-title"><strong>Câu ${index + 1}:</strong> ${q.question}</p>${q.svg || ''}${optionsHTML}`;
                part1Container.appendChild(qBlock);
            });

            // Part 2
            examData.part2.forEach((q, index) => {
                const qBlock = document.createElement('div');
                qBlock.className = 'question-block';
                qBlock.id = `p2-q${index}`;
                let statementsHTML = '<table class="w-full"><tbody>';
                q.statements.forEach((stmt, i) => {
                    const statementChar = String.fromCharCode(97 + i);
                    statementsHTML += `
                        <tr id="p2-q${index}-s${i}" class="true-false-table">
                            <td class="statement-cell py-2"><strong>${statementChar})</strong> ${stmt.text}</td>
                            <td class="option-cell py-2">
                                <label class="option !mb-0 !p-2">
                                    <input type="radio" name="p2-q${index}-s${i}" value="true"> Đúng
                                </label>
                            </td>
                            <td class="option-cell py-2">
                                <label class="option !mb-0 !p-2">
                                    <input type="radio" name="p2-q${index}-s${i}" value="false"> Sai
                                </label>
                            </td>
                            <td class="feedback-cell py-2"></td>
                        </tr>
                    `;
                });
                statementsHTML += '</tbody></table>';
                qBlock.innerHTML = `<p class="question-title"><strong>Câu ${index + 1}:</strong> ${q.context}</p>${q.svg || ''}${statementsHTML}`;
                part2Container.appendChild(qBlock);
            });

            // Part 3
            examData.part3.forEach((q, index) => {
                const qBlock = document.createElement('div');
                qBlock.className = 'question-block';
                qBlock.id = `p3-q${index}`;
                qBlock.innerHTML = `
                    <p class="question-title"><strong>Câu ${index + 1}:</strong> ${q.question}</p>${q.svg || ''}
                    <input type="text" class="short-answer-input" name="p3-q${index}" placeholder="Nhập câu trả lời của bạn...">
                `;
                part3Container.appendChild(qBlock);
            });
        }
        
        function getResultIcon(isCorrect, isAnswered) {
            if (!isAnswered) return '<span class="result-icon">⚪️</span><span class="text-orange-600 font-medium ml-2">Chưa làm</span>';
            if (isCorrect) return '<span class="result-icon">✅</span>';
            return '<span class="result-icon">❌</span>';
        }

        function submitExam() {
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.style.opacity = '0.5';
            redoBtn.style.display = 'block';

            let correctItems = 0;
            const totalItems = examData.part1.length + examData.part2.reduce((acc, q) => acc + q.statements.length, 0) + examData.part3.length;
            
            // Check Part 1
            examData.part1.forEach((q, index) => {
                const qBlock = document.getElementById(`p1-q${index}`);
                const selected = document.querySelector(`input[name="p1-q${index}"]:checked`);
                if (selected) {
                    if (selected.value === q.answer) {
                        correctItems++;
                        qBlock.classList.add('correct');
                    } else {
                        qBlock.classList.add('incorrect');
                        const correctLabel = Array.from(qBlock.querySelectorAll('.option')).find(label => label.querySelector('input').value === q.answer);
                        if (correctLabel) correctLabel.insertAdjacentHTML('beforeend', `<span class="correct-answer-text">(Đáp án đúng)</span>`);
                    }
                } else {
                    qBlock.classList.add('unanswered');
                    const correctLabel = Array.from(qBlock.querySelectorAll('.option')).find(label => label.querySelector('input').value === q.answer);
                    if (correctLabel) correctLabel.insertAdjacentHTML('beforeend', `<span class="correct-answer-text">(Đáp án đúng)</span>`);
                }
            });

            // Check Part 2
            examData.part2.forEach((q, qIndex) => {
                q.statements.forEach((stmt, sIndex) => {
                    const row = document.getElementById(`p2-q${qIndex}-s${sIndex}`);
                    const feedbackCell = row.querySelector('.feedback-cell');
                    const selected = document.querySelector(`input[name="p2-q${qIndex}-s${sIndex}"]:checked`);
                    let isCorrect = false;
                    let isAnswered = false;
                    if (selected) {
                        isAnswered = true;
                        if ((selected.value === 'true' && stmt.answer) || (selected.value === 'false' && !stmt.answer)) {
                            correctItems++;
                            isCorrect = true;
                        }
                    }
                    feedbackCell.innerHTML = getResultIcon(isCorrect, isAnswered);
                    if(!isCorrect){
                        feedbackCell.innerHTML += `<span class="correct-answer-text">Đáp án: ${stmt.answer ? 'Đúng' : 'Sai'}</span>`;
                    }
                });
            });

            // Check Part 3
            examData.part3.forEach((q, index) => {
                const qBlock = document.getElementById(`p3-q${index}`);
                const input = document.querySelector(`input[name="p3-q${index}"]`);
                if (input.value.trim() !== '') {
                    if (input.value.trim() == q.answer) {
                        correctItems++;
                        qBlock.classList.add('correct');
                    } else {
                        qBlock.classList.add('incorrect');
                        input.insertAdjacentHTML('afterend', `<div class="mt-2"><span class="correct-answer-text">Đáp án đúng: ${q.answer}</span></div>`);
                    }
                } else {
                    qBlock.classList.add('unanswered');
                    input.insertAdjacentHTML('afterend', `<div class="mt-2"><span class="correct-answer-text">Đáp án đúng: ${q.answer}</span></div>`);
                }
            });

            const totalScore = (correctItems / totalItems) * 10;

            resultSummaryContainer.innerHTML = `
                <h2 class="text-2xl md:text-3xl font-bold text-indigo-700 mb-4">Kết Quả Bài Làm</h2>
                <p class="text-lg md:text-xl mb-2"><strong>Tổng điểm:</strong> ${totalScore.toFixed(2)} / 10.00</p>
                <p class="text-gray-600">(Số câu đúng: ${correctItems} / ${totalItems})</p>
            `;
            resultSummaryContainer.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function redoExam() {
            document.getElementById('exam-form').reset();
            document.querySelectorAll('.question-block').forEach(el => el.classList.remove('correct', 'incorrect', 'unanswered'));
            document.querySelectorAll('.correct-answer-text').forEach(el => el.remove());
            document.querySelectorAll('.feedback-cell').forEach(el => el.innerHTML = '');
            submitBtn.disabled = false;
            submitBtn.style.opacity = '1';
            redoBtn.style.display = 'none';
            resultSummaryContainer.style.display = 'none';
            timeRemaining = 3600;
            startTimer();
        }

        submitBtn.addEventListener('click', submitExam);
        redoBtn.addEventListener('click', redoExam);

        window.onload = () => {
            loadExam();
            startTimer();
        };
    </script>
</body>
</html>
